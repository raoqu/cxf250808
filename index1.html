<!DOCTYPE html>
<html lang=en>

<head>
  <meta charset=utf-8>
  <meta name=renderer content=webkit>
  <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
  <meta name=viewport content="width=device-width, initial-scale=1.0">
  <title>湖北省建设工程质量检测监管系统</title>
  <link rel=stylesheet href="foxai.css">
  <link rel=stylesheet href="body2.css">
  <link rel=stylesheet href="body.css">
  <link rel=stylesheet href="global.css">
  <link rel=stylesheet href="global2.css">
  <meta http-equiv=X-UA-Compatible content="IE=edge">
  <meta name=viewport content="width=device-width, initial-scale=1.0">
  <title>湖北省建设工程质量检测监管系统</title>
  <meta name=referrer content=no-referrer>
  <meta http-equiv=content-security-policy
    content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;">
</head>

<body class=index>
  <div id=sy
    style="background:url(watermark.png)center center repeat;width:100%;height:100%;position:fixed;z-index:99999;pointer-events:none">
  </div>
  <div id=app class=wcDiv>
    <div class=xtmc>湖北省建设工程质量检测监管系统</div>
    <div style="padding:0px 15px">
      <div class="el-card box-card is-always-shadow">
        <div class=el-card__header>
          <div class=clearfix>
            <div class=form_title>
              报告信息
            </div>
          </div>
        </div>
        <div class=el-card__body>
          <div class=hang>工程名称:<span> 中国供销·公安商贸物流园（公安县域集采集配中心）商业一期项目 </span></div>
          <hr>
          <div class=hang>委托单位:<span> 公安县供销商贸物流有限公司 </span></div>
          <hr>
          <div class=hang>检测单位:<span> 武汉轻工工程技术有限公司荆州分公司 </span></div>
          <hr>
          <div class=hang>监督单位:<span> 公安县建筑工程服务中心质量监督站 </span></div>
          <hr>
          <div class=hang>检验编号:<span> GMJC25000019 </span></div>
          <hr>
          <div class=hang>样品名称:<span> 钢筋机械连接 </span></div>
          <hr>
          <div class=hang>报告日期:<span> 2025-07-31 </span></div>
          <hr>
          <div class=hang>使用部位:<span> 8#农副产品交易中心二层 </span></div>
          <hr>
          <div class=hang>检验结果:<span> 合格 </span></div>
          <hr>
          <div class=hang>唯一性标识:<span> NPDKC36146|3 </span></div>
        </div>
      </div> <button type=button class="el-button el-button--primary" style="margin:15px 0px;width:100%"
        onclick="openReport()"><span>打开报告</span></button>
    </div>
    <style>
      .slide-transition {
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        transform: translateY(-50px);
        opacity: 0;
      }
      .slide-in {
        transform: translateY(0);
        opacity: 1;
      }
      /* Add additional fade effect to enhance the transition */
      @keyframes fadeEffect {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }
      .fade-effect {
        animation: fadeEffect 0.3s ease-in-out;
      }
    </style>
    <div class="el-dialog__wrapper pdfdialog1 slide-transition" style="display:none">
      <div role=dialog aria-modal=true aria-label=dialog class="el-dialog" style="margin-top:0;width:100%;height:100vh;display:flex;flex-direction:column">
        <div class="el-dialog__header"><span class="el-dialog__title"></span><button type=button aria-label=Close
            class=el-dialog__headerbtn><i class="el-dialog__close el-icon el-icon-close"></i></button></div>
        <div class=el-dialog__footer><span class=dialog-footer><button type=button
              class="el-button but_query el-button--default"><span>关闭</span></button></span></div>
      </div>
    </div>
  </div>
  <div id=foxai-shadow-dom><template shadowrootmode=open>
      <div id=foxai-wrapper></div>
    </template></div>
  
  <script>
    
    // Define the openReport function
    function openReport() {
      // Get the existing dialog container
      const dialogContainer = document.querySelector('.pdfdialog1');
      const dialogContent = dialogContainer.querySelector('.el-dialog');
      
      // Show dialog with slide in and fade effect
      dialogContainer.style.display = 'block';
      // Trigger reflow to ensure transition applies
      void dialogContainer.offsetWidth;
      dialogContainer.classList.add('slide-in');
      dialogContainer.classList.add('fade-effect');
      
      // Remove all existing dialog bodies to prevent duplicates
      const existingBodies = dialogContent.querySelectorAll('.el-dialog__body');
      existingBodies.forEach(body => body.parentNode.removeChild(body));
      
      // Create a fresh dialog body
      const dialogBody = document.createElement('div');
      dialogBody.className = 'el-dialog__body';
      dialogBody.style.margin = '0';
      dialogBody.style.flex = '1';
      dialogBody.style.overflow = 'auto';
      dialogBody.style.opacity = '0.95';
      
      // Create iframe for PDF viewing using PDF.js viewer
      const pdfIframe = document.createElement('iframe');
      pdfIframe.id = 'pdf-iframe';
      pdfIframe.style.width = '100%';
      pdfIframe.style.height = '100%'; // Fill the entire dialog body
      pdfIframe.style.border = 'none';
      
      // Use PDF.js viewer with the PDF URL
      pdfIframe.src = 'viewer/viewer.html?file=/a.pdf';
      
      // Add iframe to dialog body
      dialogBody.appendChild(pdfIframe);
      
      // Insert dialog body before footer
      const footer = dialogContainer.querySelector('.el-dialog__footer');
      footer.parentNode.insertBefore(dialogBody, footer);
      
      // Update dialog title
      const titleElement = dialogContainer.querySelector('.el-dialog__title');
      if (titleElement) {
        titleElement.textContent = '检测报告 - GMJC25000019';
      }
      
      // Add download button to footer
      const footerSpan = dialogContainer.querySelector('.dialog-footer');
      if (footerSpan) {
        // Check if download button already exists
        const existingDownloadBtn = footerSpan.querySelector('.download-btn');
        if (!existingDownloadBtn) {
          const downloadBtn = document.createElement('a');
          downloadBtn.href = 'a.pdf';
          downloadBtn.download = '检测报告.pdf';
          downloadBtn.className = 'el-button el-button--primary download-btn';
          downloadBtn.style.marginRight = '10px';
        }
      }
      
      // Function to close dialog and destroy iframe
      const closeAndDestroyIframe = function() {
        // Slide up dialog
        dialogContainer.classList.remove('slide-in');
        
        // Wait for animation to complete before hiding
        setTimeout(() => {
          // Hide dialog
          dialogContainer.style.display = 'none';
          
          // Find and remove the iframe
          const iframe = dialogContainer.querySelector('iframe');
          if (iframe) iframe.remove();
        }, 300); // Match the transition duration (0.3s = 300ms)
      };
      
      // Add event listeners for close buttons
      const closeButtons = dialogContainer.querySelectorAll('.el-dialog__headerbtn, .el-button--default');
      closeButtons.forEach(button => {
        button.onclick = closeAndDestroyIframe;
      });
    }
  </script>
  <script data-template-shadow-root>(
      () => {
        document.currentScript.remove();
        processNode(document);
        function processNode(node) {
          node.querySelectorAll("template[shadowrootmode]").forEach(element => {
            let shadowRoot = element.parentElement.shadowRoot;
            if (!shadowRoot) {
              try {
                shadowRoot = element.parentElement.attachShadow({
                  mode: element.getAttribute("shadowrootmode"),
                  delegatesFocus: element.getAttribute("shadowrootdelegatesfocus") != null,
                  clonable: element.getAttribute("shadowrootclonable") != null,
                  serializable: element.getAttribute("shadowrootserializable") != null
                });
                shadowRoot.innerHTML = element.innerHTML; element.remove()
              } catch (error) { }
              if (shadowRoot) {
                processNode(shadowRoot)
              }
            }
          })
        }
      })()
  </script>